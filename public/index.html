<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<link rel="icon" href="/res/aton-logo.png" sizes="512x512" type="image/png">

<!-- Add iOS meta tags and icons -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="ATON Framework">
<link rel="apple-touch-icon" href="/res/aton-logo.png">
<meta name="description" content="ATON Framework">
<!-- Add meta theme-color -->
<meta name="theme-color" content="#000000" />

<title>ATON Framework</title>
<link rel="stylesheet" type="text/css" href="/res/css/aton.css">
<script type="text/javascript" src="/vendors/vendors.min.js"></script>
<script type="text/javascript" src="shu/shu.js"></script>

<script>

let onLandingData = (data)=>{
    let htmlcontent = "";

    if (data.redirect !== undefined){
        window.location.replace(data.redirect);
        return;
    }

    if (data.gallery){
        htmlcontent += "<div class='atonBlockTitle'>Published Scenes</div>";
        htmlcontent += "<div id='idScenes'></div><div id='btn-go' class='atonBTN atonBTN-green' style='width:30%;'><img src='/res/icons/play.png'></div><br><br>";

        htmlcontent += "<div id='idPubGallery'></div>";
    }

    // Footer
    htmlcontent += "<br><a href='http://osiris.itabc.cnr.it/scenebaker/index.php/projects/aton/' target='_blank'>ATON</a> framework by <a href='https://www.ispc.cnr.it/' target='_blank'>CNR ISPC</a>";

    $("#idMainContent").html(htmlcontent);

    if (data.gallery){
        SHU.getScenesInputList("idScenes");
        $("#btn-go").click(()=>{
            let sid = $("#sid").val();

            if (sid && sid.length > 1) SHU.goToScene( sid );
        });

        SHU.createPubScenesGallery("idPubGallery");
    }
};

window.addEventListener( 'load', ()=>{
/*
    BE.getScenesSelect("sid");
    $("#sid").on("change", ()=>{
        BE.goToScene( $("#sid").val() );
    });
*/
$.getJSON( PATH_RESTAPI+"landing", onLandingData );
});

</script>
</head>

<body class="atonDefaultBody">
    <div style="text-align: center;">
        <img src="/res/aton-logo.png" style="width:150px; height:auto;"><br>

        <div id='idMainContent'></div>
<!--
        <div class='select' style='width:50%;'>
            <select id='sid'></select><div class='selectArrow'></div>
        </div>
-->

    </div>
    
    </body>