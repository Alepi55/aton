<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<link rel="icon" href="/res/aton-logo.png" sizes="512x512" type="image/png">

<!-- Add iOS meta tags and icons -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Login">
<link rel="apple-touch-icon" href="/res/aton-logo.png">
<meta name="description" content="Login">
<!-- Add meta theme-color -->
<meta name="theme-color" content="#000000" />

<title>Login</title>
<link rel="stylesheet" type="text/css" href="/res/css/aton.css">
<script type="text/javascript" src="/vendors/vendors.min.js"></script>
<script type="text/javascript" src="/be/be.js"></script>

<script>

let urlParams = new URLSearchParams(window.location.search);
let targetURL = urlParams.get('url');


let onLoginResponse = (r)=>{
    if (r){
        if (targetURL === undefined || targetURL === null) return;
        window.location.href = targetURL;
        return;
    }

    // Failed
    $("#idLoginBTN").html("Login FAILED");
};


window.addEventListener( 'load', ()=>{
    $("#idLoginBTN").click(()=>{
        let o = {
            username: $("#idUsername").val(), 
            password: $("#idPassword").val()
        };

        BE.postJSON("/api/login/", o, onLoginResponse );
    });
});

</script>
</head>

<body class="atonDefaultBody">
    <div style="text-align: center;">
        <img src="/res/aton-logo.png" style="width:200px; height: auto;"><br>

        <div class="atonBlockGroup">
            <div class="atonBlockTitle">Login</div>

            <div class="atonBlockCut">
                <label for='idUsername'>username:</label><input id='idUsername' type='text' maxlength='15' size='15' ><br>
                <label for='idPassword'>password:</label><input id='idPassword' type='password' maxlength='15' size='15' ><br>

                <button type='button' class='atonBTN atonBTN-green' id='idLoginBTN' style='width:80%'>LOGIN</div>
            </div>

        </div>

    </div>
    
    </body>